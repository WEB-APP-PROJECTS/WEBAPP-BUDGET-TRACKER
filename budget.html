<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Budget Setting</title>
  <link rel="stylesheet" href="budget.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>

  <div class="budget-container">
    <h2>BUDGET</h2>

    <div class="form-row">
      <div class="input-box">
        <label for="start">Start Date</label><br />
        <input type="date" id="start" name="start" />
      </div>

      <div class="input-box">
        <label for="end">End Date</label><br />
        <input type="date" id="end" name="end" />
      </div>

      <div class="input-box">
        <label for="category">Category</label><br />
        <select id="category" name="category">
          <option value="Food">Food</option>
          <option value="Transport">Transport</option>
          <option value="Rent">Rent</option>
          <option value="Entertainment">Entertainment</option>
        </select>
      </div>

      <div class="input-box">
        <label for="amount">Budget Amount</label><br />
        <input type="number" id="amount" name="amount" />
      </div>
    </div>

    <div class="btn-row">
      <button class="btn" id="setBtn">Set Budget</button>
      <button class="btn" id="updateBtn">Update Budget</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>Category</th>
          <th>Set Limits</th>
          <th>Spent So Far</th>
          <th>Remaining</th>
          <th>Progress</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <!-- Dynamic rows will go here -->
      </tbody>
    </table>
  </div>

  <div class="nav-bar">
    <i class="fas fa-home"></i>
    <i class="fas fa-chart-line"></i>
    <i class="fas fa-file-alt"></i>
    <i class="fas fa-user"></i>
  </div>

  <script>
    const setBtn = document.getElementById('setBtn');
    const updateBtn = document.getElementById('updateBtn');
    const tableBody = document.querySelector("table tbody");

    let editingRow = null;

    // Set Budget
    setBtn.addEventListener("click", () => {
      const category = document.getElementById("category").value;
      const amount = document.getElementById("amount").value;

      if (!category || !amount) {
        alert("Please fill in all fields.");
        return;
      }

      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${category}</td>
        <td>$${amount}</td>
        <td>$0</td>
        <td>$${amount}</td>
        <td>0%</td>
        <td class="action-icons">
          <a href="#" onclick="editRow(this)">[Edit]</a>
          <i class="fas fa-trash icon-delete" onclick="deleteRow(this)"></i>
        </td>
      `;

      tableBody.appendChild(row);
      clearForm();
    });

    // Update Budget
    updateBtn.addEventListener("click", () => {
      if (!editingRow) {
        alert("Please click [Edit] on a row first.");
        return;
      }

      const category = document.getElementById("category").value;
      const amount = document.getElementById("amount").value;

      if (!category || !amount) {
        alert("Please fill in all fields.");
        return;
      }

      editingRow.cells[0].innerText = category;
      editingRow.cells[1].innerText = `$${amount}`;
      editingRow.cells[2].innerText = `$0`;
      editingRow.cells[3].innerText = `$${amount}`;
      editingRow.cells[4].innerText = `0%`;

      editingRow = null;
      clearForm();
    });

    function editRow(link) {
      const row = link.closest("tr");
      editingRow = row;

      document.getElementById("category").value = row.cells[0].innerText;
      document.getElementById("amount").value = row.cells[1].innerText.replace("$", "");
    }

    function deleteRow(icon) {
      const row = icon.closest("tr");
      row.remove();
      if (editingRow === row) editingRow = null;
    }

    function clearForm() {
      document.getElementById("category").value = "Food";
      document.getElementById("amount").value = "";
    }
  </script>

</body>
</html>
